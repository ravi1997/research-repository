{% extends "base.html" %}

{% block content %}
    <div class="login-container">
        <h2>Login to AIIMS Research Publication Repository</h2>

        <!-- Mobile Number Form with CAPTCHA -->
        <form id="login-form" action="../researchrepository/api/auth/login" method="post" onsubmit="submitForm(event)">
            <input type="text" name="mobile" placeholder="Enter Mobile Number" required pattern="\d{10}">
            <div class="captcha-box">
                <div id="captchaCode" class="captcha-code"></div>
                <button type="button" class="refresh-btn" onclick="generateCaptcha('captchaCode')">⟳</button>
            </div>
            <input type="text" name="captcha" placeholder="Enter CAPTCHA" required>
            <button type="submit">Send OTP</button>
        </form>

        <!-- OTP Verification Form with CAPTCHA -->
        <form id="otp-form" action="../researchrepository/api/auth/verify_otp" method="post" style="display:none;"
            onsubmit="submitFormVerify(event)">
            <input type="text" name="OTP" placeholder="Enter OTP" required pattern="\d{6}">
            <div class="captcha-box">
                <div id="captchaCode2" class="captcha-code"></div>
                <button type="button" class="refresh-btn" onclick="generateCaptcha('captchaCode2')">⟳</button>
            </div>
            <input type="text" name="captcha2" placeholder="Enter CAPTCHA" required>
            <button type="submit">Verify OTP</button>
        </form>

        <p>Don't have an account? <a href="/register">Register here</a></p>
    </div>
    <script src="{{url_for('static',filename='js/common.js')}}"></script>
    <script src="{{url_for('static',filename='js/login.js')}}"></script>

{% endblock %}